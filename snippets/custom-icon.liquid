{% comment %}
  Renders product benefits/features with icons

  Usage:
  {% render 'custom-icon', section: section %}
{% endcomment %}

<style>
  .custom-benefits-wrapper {
    background: {{ section.settings.section_background }};
    padding: {{ section.settings.section_padding }}px 0;
    margin: {{ section.settings.section_margin }}px 0;
  }

  .custom-benefits-grid {
    display: grid;
    grid-template-columns: repeat({{ section.settings.columns_desktop }}, 1fr);
    gap: {{ section.settings.gap_desktop }}px;
    max-width: {{ section.settings.container_width }}px;
    margin: 0 auto;
    padding: 0 1.5rem;
  }

  @media screen and (max-width: 749px) {
    .custom-benefits-grid {
      grid-template-columns: repeat({{ section.settings.columns_mobile }}, 1fr);
      gap: {{ section.settings.gap_mobile }}px;
    }
  }

  .benefit-item {
    display: flex;
    align-items: {{ section.settings.alignment }};
    gap: {{ section.settings.item_gap }}px;
    padding: {{ section.settings.item_padding }}px;
    background: {{ section.settings.item_background }};
    border-radius: {{ section.settings.border_radius }}px;
    {% if section.settings.show_border %}
    border: {{ section.settings.border_width }}px solid {{ section.settings.border_color }};
    {% endif %}
  }

  .benefit-icon {
    flex-shrink: 0;
    width: {{ section.settings.icon_size }}px;
    height: {{ section.settings.icon_size }}px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: {{ section.settings.icon_background_color }};
    border-radius: {{ section.settings.icon_border_radius }}%;
    overflow: hidden;
  }

  .benefit-icon svg {
    width: {{ section.settings.icon_svg_size }}px;
    height: {{ section.settings.icon_svg_size }}px;
    fill: {{ section.settings.icon_color }};
  }

  .benefit-icon img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .benefit-content {
    flex: 1;
  }

  .benefit-title {
    font-size: {{ section.settings.title_size }}px;
    font-weight: {{ section.settings.title_weight }};
    color: {{ section.settings.title_color }};
    line-height: 1.4;
    margin: 0;
  }

  .benefit-description {
    font-size: {{ section.settings.description_size }}px;
    font-weight: {{ section.settings.description_weight }};
    color: {{ section.settings.description_color }};
    line-height: 1.5;
    margin: 0.25rem 0 0 0;
  }
</style>

<div class="custom-benefits-wrapper">
  <div class="custom-benefits-grid">
    {% for block in section.blocks %}
      {% if block.type == 'benefit' %}
        <div class="benefit-item" {{ block.shopify_attributes }}>
          <div
            class="benefit-icon"
            style="{% if block.settings.custom_icon_bg %}background: {{ block.settings.custom_icon_bg }};{% endif %}"
          >
            {% if block.settings.benefit_image != blank %}
              <img
                src="{{ block.settings.benefit_image | image_url: width: 120 }}"
                alt="{{ block.settings.benefit_text }}"
                width="{{ block.settings.benefit_image.width }}"
                height="{{ block.settings.benefit_image.height }}"
                loading="lazy"
              >
            {% elsif block.settings.custom_icon != blank %}
              {{ block.settings.custom_icon }}
            {% else %}
              <!-- Default clover/flower icon -->
              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C10.9 2 10 2.9 10 4C10 4.7 10.3 5.4 10.8 5.8C10.3 6.3 10 7 10 7.8C10 8.9 10.9 9.8 12 9.8C12.5 9.8 13 9.6 13.4 9.3C13.6 10.4 14.5 11.2 15.6 11.2C16.7 11.2 17.6 10.3 17.6 9.2C17.6 8.6 17.4 8.1 17 7.7C18.1 7.3 18.8 6.2 18.8 5C18.8 3.3 17.5 2 15.8 2C14.7 2 13.8 2.6 13.3 3.5C12.9 2.6 12 2 12 2ZM8.2 5C6.5 5 5.2 6.3 5.2 8C5.2 9.2 5.9 10.3 7 10.7C6.6 11.1 6.4 11.6 6.4 12.2C6.4 13.3 7.3 14.2 8.4 14.2C9.5 14.2 10.4 13.4 10.6 12.3C11 12.6 11.5 12.8 12 12.8C13.1 12.8 14 11.9 14 10.8C14 10 13.7 9.3 13.2 8.8C13.7 8.4 14 7.7 14 7C14 5.9 13.1 5 12 5C11.4 5 10.9 5.2 10.5 5.6C10.1 5.2 9.5 5 8.2 5ZM15.8 12.8C14.7 12.8 13.8 13.4 13.4 14.3C13 13.6 12.5 13.4 12 13.4C10.9 13.4 10 14.3 10 15.4C10 16.2 10.3 16.9 10.8 17.3C10.3 17.7 10 18.4 10 19.2C10 20.3 10.9 21.2 12 21.2C13.1 21.2 14 20.3 14 19.2C14 18.5 13.7 17.8 13.2 17.4C13.6 17 13.8 16.5 13.8 15.8C13.8 15.3 13.6 14.8 13.3 14.5C13.8 13.6 14.7 13 15.8 13C17.5 13 18.8 14.3 18.8 16C18.8 17.7 17.5 19 15.8 19C15.3 19 14.8 18.8 14.4 18.5C14.7 18.1 14.9 17.6 14.9 17C14.9 15.9 14 15 12.9 15C12.4 15 11.9 15.2 11.5 15.5C11.2 14.4 10.3 13.6 9.2 13.6C8.1 13.6 7.2 14.5 7.2 15.6C7.2 16.2 7.4 16.7 7.8 17.1C6.7 17.5 6 18.6 6 19.8C6 21.5 7.3 22.8 9 22.8C10.1 22.8 11 22.2 11.5 21.3C11.9 22.2 12.8 22.8 13.9 22.8C15.6 22.8 16.9 21.5 16.9 19.8C16.9 18.6 16.2 17.5 15.1 17.1C15.5 16.7 15.7 16.2 15.7 15.6C15.7 15.1 15.5 14.6 15.2 14.3C15.6 13.4 16.5 12.8 15.8 12.8Z"/>
              </svg>
            {% endif %}
          </div>
          <div class="benefit-content">
            <h3 class="benefit-title">{{ block.settings.benefit_text }}</h3>
            {% if block.settings.benefit_description != blank %}
              <p class="benefit-description">{{ block.settings.benefit_description }}</p>
            {% endif %}
          </div>
        </div>
      {% endif %}
    {% endfor %}
  </div>
</div>

{% schema %}
{
  "name": "Product Benefits",
  "settings": [
    {
      "type": "header",
      "content": "Layout Settings"
    },
    {
      "type": "range",
      "id": "container_width",
      "min": 600,
      "max": 1400,
      "step": 50,
      "unit": "px",
      "label": "Container Max Width",
      "default": 1200
    },
    {
      "type": "range",
      "id": "columns_desktop",
      "min": 1,
      "max": 4,
      "step": 1,
      "label": "Columns (Desktop)",
      "default": 2
    },
    {
      "type": "range",
      "id": "columns_mobile",
      "min": 1,
      "max": 2,
      "step": 1,
      "label": "Columns (Mobile)",
      "default": 1
    },
    {
      "type": "range",
      "id": "gap_desktop",
      "min": 0,
      "max": 60,
      "step": 4,
      "unit": "px",
      "label": "Gap Between Items (Desktop)",
      "default": 24
    },
    {
      "type": "range",
      "id": "gap_mobile",
      "min": 0,
      "max": 40,
      "step": 4,
      "unit": "px",
      "label": "Gap Between Items (Mobile)",
      "default": 16
    },
    {
      "type": "select",
      "id": "alignment",
      "label": "Item Alignment",
      "options": [
        {
          "value": "flex-start",
          "label": "Top"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "flex-end",
          "label": "Bottom"
        }
      ],
      "default": "center"
    },
    {
      "type": "header",
      "content": "Section Spacing"
    },
    {
      "type": "color",
      "id": "section_background",
      "label": "Section Background Color",
      "default": "transparent"
    },
    {
      "type": "range",
      "id": "section_padding",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Section Padding (Top/Bottom)",
      "default": 32
    },
    {
      "type": "range",
      "id": "section_margin",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Section Margin (Top/Bottom)",
      "default": 32
    },
    {
      "type": "header",
      "content": "Item Styling"
    },
    {
      "type": "color",
      "id": "item_background",
      "label": "Item Background Color",
      "default": "transparent"
    },
    {
      "type": "range",
      "id": "item_padding",
      "min": 0,
      "max": 40,
      "step": 4,
      "unit": "px",
      "label": "Item Padding",
      "default": 16
    },
    {
      "type": "range",
      "id": "item_gap",
      "min": 8,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Gap Between Icon & Text",
      "default": 16
    },
    {
      "type": "range",
      "id": "border_radius",
      "min": 0,
      "max": 50,
      "step": 2,
      "unit": "px",
      "label": "Item Border Radius",
      "default": 8
    },
    {
      "type": "checkbox",
      "id": "show_border",
      "label": "Show Item Border",
      "default": false
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border Color",
      "default": "#e5e7eb"
    },
    {
      "type": "range",
      "id": "border_width",
      "min": 1,
      "max": 5,
      "step": 1,
      "unit": "px",
      "label": "Border Width",
      "default": 1
    },
    {
      "type": "header",
      "content": "Icon Settings"
    },
    {
      "type": "range",
      "id": "icon_size",
      "min": 30,
      "max": 120,
      "step": 5,
      "unit": "px",
      "label": "Icon Container Size",
      "default": 60
    },
    {
      "type": "range",
      "id": "icon_svg_size",
      "min": 16,
      "max": 80,
      "step": 2,
      "unit": "px",
      "label": "Icon SVG Size",
      "default": 32
    },
    {
      "type": "color",
      "id": "icon_background_color",
      "label": "Icon Background Color",
      "default": "#f5f3ff"
    },
    {
      "type": "color",
      "id": "icon_color",
      "label": "Icon Color",
      "default": "#5b47db"
    },
    {
      "type": "range",
      "id": "icon_border_radius",
      "min": 0,
      "max": 50,
      "step": 5,
      "unit": "%",
      "label": "Icon Border Radius (0=square, 50=circle)",
      "default": 50
    },
    {
      "type": "header",
      "content": "Title Settings"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title Color",
      "default": "#5b47db"
    },
    {
      "type": "range",
      "id": "title_size",
      "min": 12,
      "max": 32,
      "step": 1,
      "unit": "px",
      "label": "Title Size",
      "default": 18
    },
    {
      "type": "select",
      "id": "title_weight",
      "label": "Title Weight",
      "options": [
        {
          "value": "400",
          "label": "Normal"
        },
        {
          "value": "500",
          "label": "Medium"
        },
        {
          "value": "600",
          "label": "Semi Bold"
        },
        {
          "value": "700",
          "label": "Bold"
        }
      ],
      "default": "600"
    },
    {
      "type": "header",
      "content": "Description Settings"
    },
    {
      "type": "color",
      "id": "description_color",
      "label": "Description Color",
      "default": "#6b7280"
    },
    {
      "type": "range",
      "id": "description_size",
      "min": 10,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Description Size",
      "default": 14
    },
    {
      "type": "select",
      "id": "description_weight",
      "label": "Description Weight",
      "options": [
        {
          "value": "300",
          "label": "Light"
        },
        {
          "value": "400",
          "label": "Normal"
        },
        {
          "value": "500",
          "label": "Medium"
        },
        {
          "value": "600",
          "label": "Semi Bold"
        }
      ],
      "default": "400"
    }
  ],
  "blocks": [
    {
      "type": "benefit",
      "name": "Benefit Item",
      "settings": [
        {
          "type": "image_picker",
          "id": "benefit_image",
          "label": "Benefit Image",
          "info": "Upload an image icon. If provided, this will be used instead of SVG icon."
        },
        {
          "type": "html",
          "id": "custom_icon",
          "label": "Custom Icon SVG (Optional)",
          "info": "Paste SVG code here. Used only if image is not uploaded."
        },
        {
          "type": "color",
          "id": "custom_icon_bg",
          "label": "Custom Icon Background (Optional)",
          "info": "Override global icon background for this item only"
        },
        {
          "type": "text",
          "id": "benefit_text",
          "label": "Benefit Title",
          "default": "Enter benefit title"
        },
        {
          "type": "textarea",
          "id": "benefit_description",
          "label": "Benefit Description (Optional)",
          "info": "Add additional details about this benefit"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Product Benefits",
      "blocks": [
        {
          "type": "benefit",
          "settings": {
            "benefit_text": "Increases Stamina"
          }
        },
        {
          "type": "benefit",
          "settings": {
            "benefit_text": "Boosts Muscle Recover"
          }
        },
        {
          "type": "benefit",
          "settings": {
            "benefit_text": "Reduces Stress, Improves Sleep"
          }
        },
        {
          "type": "benefit",
          "settings": {
            "benefit_text": "Improves joint health"
          }
        },
        {
          "type": "benefit",
          "settings": {
            "benefit_text": "Increased Power"
          }
        },
        {
          "type": "benefit",
          "settings": {
            "benefit_text": "Double the Strength"
          }
        }
      ]
    }
  ]
}
{% endschema %}
